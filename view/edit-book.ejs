<div class="container">
  <% if (alert) { %>
  <div class="alert alert-success alert-dismissible fade show" role="alert">
    <%= alert %>
    <button
      type="button"
      class="btn-close"
      data-bs-dismiss="alert"
      aria-label="Close"
    ></button>
  </div>

  <% } %> <% books.forEach(book => { %>
  <form
    method="POST"
    action="/updatebook/<%=book.bookId %>"
    class="row m-5 g-3 needs-validation form-container"
    novalidate
    encType="multipart/form-data"
  >
    <!-- Cover -->
    <div class="row mb-2">
      <div class="col-2">
        <label for="name" class="form-label">Cover</label>
      </div>

      <div class="col-8">
        <input
          type="file"
          class="form-control"
          id="file"
          name="file"
          accept="image/*"
        />
        <% if (book.bookCover) { %>
        <p>Current File: <%= book.bookCover %></p>
        <% } %>
      </div>
    </div>

    <!--Title -->
    <div class="row mb-2">
      <div class="col-2">
        <label for="name" class="form-label">Title</label>
      </div>

      <div class="col-8">
        <input
          type="text"
          class="form-control"
          id="book_title"
          name="book_title"
          value="<%= book.bookTitle %>"
        />
      </div>
    </div>

    <!--Category -->
    <div class="row mb-2">
      <div class="col-2">
        <label for="name" class="form-label">Category</label>
      </div>

      <div class="col-8">
        <select name="category" id="category" class="form-select">
          <% categories.forEach(category => { %>
            <option value="<%= category.categoryId %>" <%= category.categoryId === book.categoryId ? 'selected' : '' %>>
              <%= category.categoryName %>
            </option>
          <% }) %>
        </select>
      </div>
    </div>

    <!--Author-->
    <div class="row mb-2">
      <div class="col-2">
        <label for="name" class="form-label">Author</label>
      </div>

      <div class="col-8">
        <input
          type="text"
          class="form-control"
          id="author_name"
          name="author_name"
          value="<%= book.bookAuthor %>"
        />
      </div>
    </div>

    <!--Price-->
    <div class="row mb-2">
      <div class="col-2">
        <label for="name" class="form-label">Price</label>
      </div>

      <div class="col-8">
        <input
          type="text"
          class="form-control"
          id="price"
          name="price"
          value="<%= book.bookPrice %>"
        />
      </div>
    </div>

    <!--Promotional Price-->
    <div class="row mb-2">
      <div class="col-2">
        <label for="name" class="form-label">Promotional Price</label>
      </div>

      <div class="col-8">
        <input
          type="text"
          class="form-control"
          id="promo"
          name="promo"
          value="<%= book.bookPromo %>"
        />
      </div>
    </div>

    <!--Stock-->
    <div class="row mb-2">
      <div class="col-2">
        <label for="name" class="form-label">Stock</label>
      </div>

      <div class="col-8">
        <input
          type="text"
          class="form-control"
          id="stock"
          name="stock"
          value="<%= book.stock %>"
        />
      </div>
    </div>

    <!--Released Date-->
    <div class="row mb-2">
      <div class="col-2">
        <label for="name" class="form-label">Released Date</label>
      </div>

      <div class="col-8">
        <input
          type="date"
          class="form-control"
          id="date"
          name="date"
          value="<%= book.date %>"
        />
      </div>
    </div>

    <!--Publisher-->
    <div class="row mb-2">
      <div class="col-2">
        <label for="name" class="form-label">Publisher</label>
      </div>

      <div class="col-8">
        <input
          type="text"
          class="form-control"
          id="publisher"
          name="publisher"
          value="<%= book.publisher %>"
        />
      </div>
    </div>

    <!--Language-->
    <div class="row mb-2">
      <div class="col-2">
        <label for="name" class="form-label">Language</label>
      </div>

      <div class="col-8">
        <input
          type="text"
          class="form-control"
          id="language"
          name="language"
          value="<%= book.language %>"
        />
      </div>
    </div>

    <!--number of Pages-->
    <div class="row mb-2">
      <div class="col-2">
        <label for="name" class="form-label">Number of pages</label>
      </div>

      <div class="col-8">
        <input
          type="text"
          class="form-control"
          id="pages"
          name="pages"
          value="<%= book.pages %>"
        />
      </div>
    </div>

    <!--Description-->
    <div class="row mb-2">
      <div class="col-2">
        <label for="name" class="form-label">Description</label>
      </div>

      <div class="col-8">
        <textarea name="description" id="description" class="form-control">
      <%= book.description %>
    </textarea
        >
      </div>
    </div>

    <div class="row mb-2">
      <div class="col-8"></div>
      <div class="col-3">
        <button class="btn btn-secondary" formaction="/">cancel</button>
        <button class="btn btn-primary" type="submit">update</button>
      </div>
    </div>
  </form>
  <% }) %>
</div>
